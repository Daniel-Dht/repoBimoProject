{% extends "layout.html.twig" %}

{% block title %}
  Profil Utilisateur
{% endblock %}

{% block body %}

  <div class="well">
    <h4> Profil Utilisateur </h4> 
    <hr/>
    <h2> {{ user.username }} </h2>
    <p> Droit : 
      {% for rols in user.roles %}
        {{user.roles.0}}
      {% else %}
        Cet utilisateur ne possède pas de droit
      {% endfor %}
    </p>
    <p>
      Description : on pourrait mettre ici les dates d'entrée dans l'hopital, son nombre de Bimo totale, 
      Les liens de tous les Bimos créées !
    </p> 
    <p> adresse mail : <strong> {{user.email}} </strong></p>
    <h3>Patients à charges :</h3>
    {% if not user.patients.empty %}
      <p>
        {% for patient in user.patients %}
          <a href="{{ path('viewPatient',{'id':patient.id}) }}" class="btn btn-info">
            <i class="glyphicon glyphicon-eye-open"></i>
            {{ patient.nom }} {{ patient.prenom }}
          </a>
          {% if not loop.last %}, {% endif %}
        {% endfor %}
      </p>
    {% endif %}
    <br/>


    <p>
      <a href="{{ path('listUser') }}" class="btn btn-primary">
        <i class="glyphicon glyphicon-chevron-left"></i>
        Retour à la liste d'utilisateur
      </a>
      {% if is_granted('ROLE_SUPER_ADMIN') or app.user.username == user.username %}
        <a href="{{ path('editUser',{'id':user.id}) }}" class="btn btn-warning">
          <i class="glyphicon glyphicon-edit"></i>
          Modifier le profil
        </a>
        <a href="{{ path('deleteUser',{'id':user.id}) }}" class="btn btn-danger">
          <i class="glyphicon glyphicon-trash"></i>
          Supprimer le profil 
        </a>
      {% endif %}

    </p>
  </div>
  

{% endblock %}